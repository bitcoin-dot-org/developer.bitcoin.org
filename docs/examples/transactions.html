

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transactions &mdash; Bitcoin  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Payment Processing" href="payment_processing.html" />
    <link rel="prev" title="Testing Applications" href="testing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/bitcoin-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../devguide/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Applications</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#transaction-tutorial">Transaction Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-spending">Simple Spending</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simple-raw-transaction">Simple Raw Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#complex-raw-transaction">Complex Raw Transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#offline-signing">Offline Signing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p2sh-multisig">P2SH Multisig</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="payment_processing.html">Payment Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="p2p_networking.html">P2P Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bitcoin</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Examples</a> &raquo;</li>
        
      <li>Transactions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/cornelius/bitcoin-dev-docs/blob/master/examples/transactions.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transactions">
<h1>Transactions<a class="headerlink" href="#transactions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="transaction-tutorial">
<h2>Transaction Tutorial<a class="headerlink" href="#transaction-tutorial" title="Permalink to this headline">¶</a></h2>
<p>Creating transactions is something most Bitcoin applications do. This section describes how to use Bitcoin Core’s <a class="reference external" href="/en/developer-reference#remote-procedure-calls-rpcs">RPC</a> interface to create transactions with various attributes.</p>
<p>Your applications may use something besides Bitcoin Core to create transactions, but in any system, you will need to provide the same kinds of data to create transactions with the same attributes as those described below.</p>
<p>In order to use this tutorial, you will need to setup <a class="reference external" href="/en/download">Bitcoin Core</a> and create a regression test mode environment with 50 BTC in your test wallet.</p>
<div class="section" id="simple-spending">
<h3>Simple Spending<a class="headerlink" href="#simple-spending" title="Permalink to this headline">¶</a></h3>
<p>Bitcoin Core provides several <a class="reference external" href="/en/developer-reference#remote-procedure-calls-rpcs">RPCs</a> which handle all the details of spending, including creating change outputs and paying appropriate fees. Even advanced users should use these <a class="reference external" href="/en/developer-reference#remote-procedure-calls-rpcs">RPCs</a> whenever possible to decrease the chance that satoshis will be lost by mistake.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
mvbnrCX3bg1cDRUu8pkecrvP6vQkSLDSou

&gt; <span class="nv">NEW_ADDRESS</span><span class="o">=</span>mvbnrCX3bg1cDRUu8pkecrvP6vQkSLDSou
</pre></div>
</div>
<p>Get a new Bitcoin address and save it in the shell variable <code class="docutils literal notranslate"><span class="pre">$NEW_ADDRESS</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendtoaddress <span class="nv">$NEW_ADDRESS</span> <span class="m">10</span>.00
263c018582731ff54dc72c7d67e858c002ae298835501d80200f05753de0edf0
</pre></div>
</div>
<p>Send 10 bitcoins to the address using the <a class="reference external" href="/en/developer-reference#sendtoaddress">“sendtoaddress” RPC</a>. The returned hex string is the transaction identifier (txid).</p>
<p>The <a class="reference external" href="/en/developer-reference#sendtoaddress">“sendtoaddress” RPC</a> automatically selects an unspent transaction output (UTXO) from which to spend the satoshis. In this case, it withdrew the satoshis from our only available UTXO, the coinbase transaction for block #1 which matured with the creation of block #101. To spend a specific UTXO, you could use the <a class="reference external" href="/en/developer-reference#sendfrom">“sendfrom” RPC</a> instead.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest listunspent
<span class="o">[</span>
<span class="o">]</span>
</pre></div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#listunspent">“listunspent” RPC</a> to display the UTXOs belonging to this wallet. The list is empty because it defaults to only showing confirmed UTXOs and we just spent our only confirmed UTXO.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest listunspent <span class="m">0</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;muhtvdmsnbQEPFuEmxcChX58fGvXaaUoVt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a9149ba386253ea698158b6d34802bb9b550\</span>
<span class="s2">                          f5ce36dd88ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">40.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mvbnrCX3bg1cDRUu8pkecrvP6vQkSLDSou&quot;</span><span class="p">,</span>
        <span class="nt">&quot;account&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914a57414e5ffae9ef5074bacbe10a320bb\</span>
<span class="s2">                          2614e1f388ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">10.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>Re-running the <a class="reference external" href="/en/developer-reference#listunspent">“listunspent” RPC</a> with the argument “0” to also display unconfirmed transactions shows that we have two UTXOs, both with the same txid. The first UTXO shown is a change output that <a class="reference external" href="/en/developer-reference#sendtoaddress">“sendtoaddress”</a> created using a new address from the key pool. The second UTXO shown is the spend to the address we provided. If we had spent those satoshis to someone else, that second transaction would not be displayed in our list of UTXOs.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest generate <span class="m">1</span>

&gt; <span class="nb">unset</span> NEW_ADDRESS
</pre></div>
</div>
<p>Create a new block to confirm the transaction above (takes less than a second) and clear the shell variable.</p>
</div>
<div class="section" id="simple-raw-transaction">
<h3>Simple Raw Transaction<a class="headerlink" href="#simple-raw-transaction" title="Permalink to this headline">¶</a></h3>
<p>The raw transaction <a class="reference external" href="/en/developer-reference#remote-procedure-calls-rpcs">RPCs</a> allow users to create custom transactions and delay broadcasting those transactions. However, mistakes made in raw transactions may not be detected by Bitcoin Core, and a number of raw transaction users have permanently lost large numbers of satoshis, so please be careful using raw transactions on mainnet.</p>
<p>This subsection covers one of the simplest possible raw transactions.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest listunspent
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;muhtvdmsnbQEPFuEmxcChX58fGvXaaUoVt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a9149ba386253ea698158b6d34802bb9b550\</span>
<span class="s2">                          f5ce36dd88ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">40.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mvbnrCX3bg1cDRUu8pkecrvP6vQkSLDSou&quot;</span><span class="p">,</span>
        <span class="nt">&quot;account&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914a57414e5ffae9ef5074bacbe10a320bb\</span>
<span class="s2">                          2614e1f388ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">10.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;3f4fa19803dec4d6a84fae3821da7ac7577080ef754512\</span>
<span class="s2">                  94e71f9b20e0ab1e7b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mwJTL1dZG8BAP6X7Be3CNNcuVKi7Qqt7Gk&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;210260a275cccf0f4b106220725be516adba27\</span>
<span class="s2">                          52db1bec8c5b7174c89c4c07891f88ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">50.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">101</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">UTXO_TXID</span><span class="o">=</span>3f4fa19803dec4d6a84fae3821da7ac7577080ef75451294e71f<span class="o">[</span>...<span class="o">]</span>
&gt; <span class="nv">UTXO_VOUT</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
</div>
<p>Re-run <a class="reference external" href="/en/developer-reference#listunspent">“listunspent”</a>. We now have three UTXOs: the two transactions we created before plus the coinbase transaction from block #2. We save the txid and <a class="reference external" href="/en/developer-guide#term-output-index">output index</a> number (vout) of that coinbase UTXO to shell variables.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
mz6KvC4aoUeo6wSxtiVQTo7FDwPnkp6URG

&gt; <span class="nv">NEW_ADDRESS</span><span class="o">=</span>mz6KvC4aoUeo6wSxtiVQTo7FDwPnkp6URG
</pre></div>
</div>
<p>Get a new address to use in the raw transaction.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">## Outputs - inputs = transaction fee, so always double-check your math!</span>
&gt; bitcoin-cli -regtest createrawtransaction <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    {</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS</span><span class="s1">&#39;&quot;: 49.9999</span>
<span class="s1">    }&#39;&#39;&#39;</span>
01000000017b1eabe0209b1fe794124575ef807057c77ada2138ae4fa8d6c4de<span class="se">\</span>
0398a14f3f0000000000ffffffff01f0ca052a010000001976a914cbc20a7664<span class="se">\</span>
f2f69e5355aa427045bc15e7c6c77288ac00000000

&gt; <span class="nv">RAW_TX</span><span class="o">=</span>01000000017b1eabe0209b1fe794124575ef807057c77ada2138ae4<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Using two arguments to the <a class="reference external" href="/en/developer-reference#createrawtransaction">“createrawtransaction” RPC</a>, we create a new raw format transaction. The first argument (a JSON array) references the txid of the coinbase transaction from block #2 and the index number (0) of the output from that transaction we want to spend. The second argument (a JSON object) creates the output with the address (public key hash) and number of bitcoins we want to transfer. We save the resulting raw format transaction to a shell variable.</p>
<p><img alt="Warning icon" src="../_images/icon_warning.svg" /> <strong>Warning:</strong> <a class="reference external" href="/en/developer-reference#createrawtransaction">“createrawtransaction”</a> does not automatically create change outputs, so you can easily accidentally pay a large transaction fee. In this example, our input had 50.0000 bitcoins and our output (<code class="docutils literal notranslate"><span class="pre">$NEW_ADDRESS</span></code>) is being paid 49.9999 bitcoins, so the transaction will include a fee of 0.0001 bitcoins. If we had paid <code class="docutils literal notranslate"><span class="pre">$NEW_ADDRESS</span></code> only 10 bitcoins with no other changes to this transaction, the transaction fee would be a whopping 40 bitcoins. See the Complex Raw Transaction subsection below for how to create a transaction with multiple outputs so you can send the change back to yourself.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest decoderawtransaction <span class="nv">$RAW_TX</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;c80b343d2ce2b5d829c2de9854c7c8d423c0e33bda264c4013\</span>
<span class="s2">              8d834aab4c0638&quot;</span><span class="p">,</span>
    <span class="nt">&quot;hash&quot;</span> <span class="p">:</span> <span class="s2">&quot;c80b343d2ce2b5d829c2de9854c7c8d423c0e33bda264c40138d834aab4c0638&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span> <span class="p">:</span> <span class="mi">85</span><span class="p">,</span>
    <span class="nt">&quot;vsize&quot;</span> <span class="p">:</span> <span class="mi">85</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;locktime&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;vin&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;3f4fa19803dec4d6a84fae3821da7ac7577080ef75\</span>
<span class="s2">                      451294e71f9b20e0ab1e7b&quot;</span><span class="p">,</span>
            <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptSig&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;sequence&quot;</span> <span class="p">:</span> <span class="mi">4294967295</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="mf">49.99990000</span><span class="p">,</span>
            <span class="nt">&quot;n&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;OP_DUP OP_HASH160 cbc20a7664f2f69e5355a\</span>
<span class="s2">                         a427045bc15e7c6c772 OP_EQUALVERIFY OP_CHECKSIG&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914cbc20a7664f2f69e5355aa427045bc15e\</span>
<span class="s2">                         7c6c77288ac&quot;</span><span class="p">,</span>
                <span class="nt">&quot;reqSigs&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pubkeyhash&quot;</span><span class="p">,</span>
                <span class="nt">&quot;addresses&quot;</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;mz6KvC4aoUeo6wSxtiVQTo7FDwPnkp6URG&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#decoderawtransaction">“decoderawtransaction” RPC</a> to see exactly what the transaction we just created does.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$RAW_TX</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;01000000017b1eabe0209b1fe794124575ef807057c77ada213\</span>
<span class="s2">             8ae4fa8d6c4de0398a14f3f00000000494830450221008949f0\</span>
<span class="s2">             cb400094ad2b5eb399d59d01c14d73d8fe6e96df1a7150deb38\</span>
<span class="s2">             8ab8935022079656090d7f6bac4c9a94e0aad311a4268e082a7\</span>
<span class="s2">             25f8aeae0573fb12ff866a5f01ffffffff01f0ca052a0100000\</span>
<span class="s2">             01976a914cbc20a7664f2f69e5355aa427045bc15e7c6c77288\</span>
<span class="s2">             ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">SIGNED_RAW_TX</span><span class="o">=</span>01000000017b1eabe0209b1fe794124575ef807057c77ada<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#signrawtransaction">“signrawtransaction” RPC</a> to sign the transaction created by <a class="reference external" href="/en/developer-reference#createrawtransaction">“createrawtransaction”</a> and save the returned “hex” raw format signed transaction to a shell variable.</p>
<p>Even though the transaction is now complete, the Bitcoin Core node we’re connected to doesn’t know anything about the transaction, nor does any other part of the <a class="reference external" href="/en/developer-guide#term-network">network</a>. We’ve created a spend, but we haven’t actually spent anything because we could simply unset the <code class="docutils literal notranslate"><span class="pre">$SIGNED_RAW_TX</span></code> variable to eliminate the transaction.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendrawtransaction <span class="nv">$SIGNED_RAW_TX</span>
c7736a0a0046d5a8cc61c8c3c2821d4d7517f5de2bc66a966011aaa79965ffba
</pre></div>
</div>
<p>Send the signed transaction to the connected node using the <a class="reference external" href="/en/developer-reference#sendrawtransaction">“sendrawtransaction” RPC</a>. After accepting the transaction, the node would usually then broadcast it to other peers, but we’re not currently connected to other peers because we started in regtest mode.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest generate <span class="m">1</span>

&gt; <span class="nb">unset</span> UTXO_TXID UTXO_VOUT NEW_ADDRESS RAW_TX SIGNED_RAW_TX
</pre></div>
</div>
<p>Generate a block to confirm the transaction and clear our shell variables.</p>
</div>
<div class="section" id="complex-raw-transaction">
<h3>Complex Raw Transaction<a class="headerlink" href="#complex-raw-transaction" title="Permalink to this headline">¶</a></h3>
<p>In this example, we’ll create a transaction with two inputs and two outputs. We’ll sign each of the inputs separately, as might happen if the two inputs belonged to different people who agreed to create a transaction together (such as a CoinJoin transaction).</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest listunspent
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;muhtvdmsnbQEPFuEmxcChX58fGvXaaUoVt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a9149ba386253ea698158b6d34802bb9b550\</span>
<span class="s2">                          f5ce36dd88ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">40.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835501d\</span>
<span class="s2">                  80200f05753de0edf0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mvbnrCX3bg1cDRUu8pkecrvP6vQkSLDSou&quot;</span><span class="p">,</span>
        <span class="nt">&quot;account&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914a57414e5ffae9ef5074bacbe10a320bb\</span>
<span class="s2">                          2614e1f388ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">10.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;78203a8f6b529693759e1917a1b9f05670d036fbb12911\</span>
<span class="s2">                  0ed26be6a36de827f3&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;n2KprMQm4z2vmZnPMENfbp2P1LLdAEFRjS&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;210229688a74abd0d5ad3b06ddff36fa9cd8ed\</span>
<span class="s2">                          d181d97b9489a6adc40431fb56e1d8ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">50.00000000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">101</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;c7736a0a0046d5a8cc61c8c3c2821d4d7517f5de2bc66a\</span>
<span class="s2">                  966011aaa79965ffba&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mz6KvC4aoUeo6wSxtiVQTo7FDwPnkp6URG&quot;</span><span class="p">,</span>
        <span class="nt">&quot;account&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914cbc20a7664f2f69e5355aa427045bc15\</span>
<span class="s2">                          e7c6c77288ac&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span> <span class="p">:</span> <span class="mf">49.99990000</span><span class="p">,</span>
        <span class="nt">&quot;confirmations&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;spendable&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;solvable&quot;</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">UTXO1_TXID</span><span class="o">=</span>78203a8f6b529693759e1917a1b9f05670d036fbb129110ed26<span class="o">[</span>...<span class="o">]</span>
&gt; <span class="nv">UTXO1_VOUT</span><span class="o">=</span><span class="m">0</span>
&gt; <span class="nv">UTXO1_ADDRESS</span><span class="o">=</span>n2KprMQm4z2vmZnPMENfbp2P1LLdAEFRjS

&gt; <span class="nv">UTXO2_TXID</span><span class="o">=</span>263c018582731ff54dc72c7d67e858c002ae298835501d80200<span class="o">[</span>...<span class="o">]</span>
&gt; <span class="nv">UTXO2_VOUT</span><span class="o">=</span><span class="m">0</span>
&gt; <span class="nv">UTXO2_ADDRESS</span><span class="o">=</span>muhtvdmsnbQEPFuEmxcChX58fGvXaaUoVt
</pre></div>
</div>
</div>
<p>For our two inputs, we select two UTXOs by placing the txid and <a class="reference external" href="/en/developer-guide#term-output-index">output index</a> numbers (vouts) in shell variables. We also save the addresses corresponding to the public keys (hashed or unhashed) used in those transactions. We need the addresses so we can get the corresponding private keys from our wallet.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest dumpprivkey <span class="nv">$UTXO1_ADDRESS</span>
cSp57iWuu5APuzrPGyGc4PGUeCg23PjenZPBPoUs24HtJawccHPm

&gt; bitcoin-cli -regtest dumpprivkey <span class="nv">$UTXO2_ADDRESS</span>
cT26DX6Ctco7pxaUptJujRfbMS2PJvdqiSMaGaoSktHyon8kQUSg

&gt; <span class="nv">UTXO1_PRIVATE_KEY</span><span class="o">=</span>cSp57iWuu5APuzrPGyGc4PGUeCg23PjenZPBPoUs24Ht<span class="o">[</span>...<span class="o">]</span>

&gt; <span class="nv">UTXO2_PRIVATE_KEY</span><span class="o">=</span>cT26DX6Ctco7pxaUptJujRfbMS2PJvdqiSMaGaoSktHy<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#dumpprivkey">“dumpprivkey” RPC</a> to get the private keys corresponding to the public keys used in the two UTXOs we will be spending. We need the private keys so we can sign each of the inputs separately.</p>
<p><img alt="Warning icon" src="../_images/icon_warning.svg" /> <strong>Warning:</strong> Users should never manually manage private keys on mainnet. As dangerous as raw transactions are (see warnings above), making a mistake with a private key can be much worse—as in the case of a HD wallet <a class="reference external" href="/en/developer-guide#hardened-keys">cross-generational key compromise</a>. These examples are to help you learn, not for you to emulate on mainnet.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
n4puhBEeEWD2VvjdRC9kQuX2abKxSCMNqN
&gt; bitcoin-cli -regtest getnewaddress
n4LWXU59yM5MzQev7Jx7VNeq1BqZ85ZbLj

&gt; <span class="nv">NEW_ADDRESS1</span><span class="o">=</span>n4puhBEeEWD2VvjdRC9kQuX2abKxSCMNqN
&gt; <span class="nv">NEW_ADDRESS2</span><span class="o">=</span>n4LWXU59yM5MzQev7Jx7VNeq1BqZ85ZbLj
</pre></div>
</div>
<p>For our two outputs, get two new addresses.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">## Outputs - inputs = transaction fee, so always double-check your math!</span>
&gt; bitcoin-cli -regtest createrawtransaction <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO1_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO1_VOUT</span><span class="s1">&#39;</span>
<span class="s1">      },</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO2_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO2_VOUT</span><span class="s1">&#39;</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    {</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS1</span><span class="s1">&#39;&quot;: 79.9999,</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS2</span><span class="s1">&#39;&quot;: 10</span>
<span class="s1">    }&#39;&#39;&#39;</span>
0100000002f327e86da3e66bd20e1129b1fb36d07056f0b9a117199e75939652<span class="se">\</span>
6b8f3a20780000000000fffffffff0ede03d75050f20801d50358829ae02c058<span class="se">\</span>
e8677d2cc74df51f738285013c260000000000ffffffff02f028d6dc01000000<span class="se">\</span>
1976a914ffb035781c3c69e076d48b60c3d38592e7ce06a788ac00ca9a3b0000<span class="se">\</span>
00001976a914fa5139067622fd7e1e722a05c17c2bb7d5fd6df088ac00000000

&gt; <span class="nv">RAW_TX</span><span class="o">=</span>0100000002f327e86da3e66bd20e1129b1fb36d07056f0b9a117199<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Create the raw transaction using <a class="reference external" href="/en/developer-reference#createrawtransaction">“createrawtransaction”</a> much the same as before, except now we have two inputs and two outputs.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$RAW_TX</span> <span class="s1">&#39;[]&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$UTXO1_PRIVATE_KEY</span><span class="s1">&#39;&quot;</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;0100000002f327e86da3e66bd20e1129b1fb36d07056f0b9a11\</span>
<span class="s2">             7199e759396526b8f3a20780000000049483045022100fce442\</span>
<span class="s2">             ec52aa2792efc27fd3ad0eaf7fa69f097fdcefab017ea56d179\</span>
<span class="s2">             9b10b2102207a6ae3eb61e11ffaba0453f173d1792f1b7bb8e7\</span>
<span class="s2">             422ea945101d68535c4b474801fffffffff0ede03d75050f208\</span>
<span class="s2">             01d50358829ae02c058e8677d2cc74df51f738285013c260000\</span>
<span class="s2">             000000ffffffff02f028d6dc010000001976a914ffb035781c3\</span>
<span class="s2">             c69e076d48b60c3d38592e7ce06a788ac00ca9a3b0000000019\</span>
<span class="s2">             76a914fa5139067622fd7e1e722a05c17c2bb7d5fd6df088ac0\</span>
<span class="s2">             0000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">false</span>
    <span class="s2">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;txid&quot;</span><span class="p">:</span> <span class="s2">&quot;c53f8f5ac0b6b10cdc77f543718eb3880fee6cf9b5e0cbf4edb2a59c0fae09a4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;vout&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;scriptSig&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sequence&quot;</span><span class="p">:</span> <span class="mi">4294967295</span><span class="p">,</span>
      <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Operation not valid with the current stack size&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">PARTLY_SIGNED_RAW_TX</span><span class="o">=</span>0100000002f327e86da3e66bd20e1129b1fb36d07<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Signing the raw transaction with <a class="reference external" href="/en/developer-reference#signrawtransaction">“signrawtransaction”</a> gets more complicated as we now have three arguments:</p>
<ol class="arabic simple">
<li><p>The unsigned raw transaction.</p></li>
<li><p>An empty array. We don’t do anything with this argument in this operation, but some valid JSON must be provided to get access to the later positional arguments.</p></li>
<li><p>The private key we want to use to sign one of the inputs.</p></li>
</ol>
<p>The result is a raw transaction with only one input signed; the fact that the transaction isn’t fully signed is indicated by value of the <code class="docutils literal notranslate"><span class="pre">complete</span></code> JSON field. We save the incomplete, partly-signed raw transaction hex to a shell variable.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$PARTLY_SIGNED_RAW_TX</span> <span class="s1">&#39;[]&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$UTXO2_PRIVATE_KEY</span><span class="s1">&#39;&quot;</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;0100000002f327e86da3e66bd20e1129b1fb36d07056f0b9a11\</span>
<span class="s2">             7199e759396526b8f3a20780000000049483045022100fce442\</span>
<span class="s2">             ec52aa2792efc27fd3ad0eaf7fa69f097fdcefab017ea56d179\</span>
<span class="s2">             9b10b2102207a6ae3eb61e11ffaba0453f173d1792f1b7bb8e7\</span>
<span class="s2">             422ea945101d68535c4b474801fffffffff0ede03d75050f208\</span>
<span class="s2">             01d50358829ae02c058e8677d2cc74df51f738285013c260000\</span>
<span class="s2">             00006b483045022100b77f935ff366a6f3c2fdeb83589c79026\</span>
<span class="s2">             5d43b3d2cf5e5f0047da56c36de75f40220707ceda75d8dcf2c\</span>
<span class="s2">             caebc506f7293c3dcb910554560763d7659fb202f8ec324b012\</span>
<span class="s2">             102240d7d3c7aad57b68aa0178f4c56f997d1bfab2ded3c2f94\</span>
<span class="s2">             27686017c603a6d6ffffffff02f028d6dc010000001976a914f\</span>
<span class="s2">             fb035781c3c69e076d48b60c3d38592e7ce06a788ac00ca9a3b\</span>
<span class="s2">             000000001976a914fa5139067622fd7e1e722a05c17c2bb7d5f\</span>
<span class="s2">             d6df088ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>To sign the second input, we repeat the process we used to sign the first input using the second private key. Now that both inputs are signed, the <code class="docutils literal notranslate"><span class="pre">complete</span></code> result is <em>true</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nb">unset</span> PARTLY_SIGNED_RAW_TX RAW_TX NEW_ADDRESS1 <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Clean up the shell variables used. Unlike previous subsections, we’re not going to send this transaction to the connected node with <a class="reference external" href="/en/developer-reference#sendrawtransaction">“sendrawtransaction”</a>. This will allow us to illustrate in the Offline Signing subsection below how to spend a transaction which is not yet in the block chain or memory pool.</p>
</div>
<div class="section" id="offline-signing">
<h3>Offline Signing<a class="headerlink" href="#offline-signing" title="Permalink to this headline">¶</a></h3>
<p>We will now spend the transaction created in the Complex Raw Transaction subsection above without sending it to the local node first. This is the same basic process used by wallet programs for offline signing—which generally means signing a transaction without access to the current UTXO set.</p>
<p>Offline signing is safe. However, in this example we will also be spending an output which is not part of the block chain because the transaction containing it has never been broadcast. That can be unsafe:</p>
<p><img alt="Warning icon" src="../_images/icon_warning.svg" /> <strong>Warning:</strong> Transactions which spend outputs from unconfirmed transactions are vulnerable to transaction malleability. Be sure to read about transaction malleability and adopt good practices before spending unconfirmed transactions on mainnet.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">OLD_SIGNED_RAW_TX</span><span class="o">=</span>0100000002f327e86da3e66bd20e1129b1fb36d07056<span class="se">\</span>
      f0b9a117199e759396526b8f3a20780000000049483045022100fce442<span class="se">\</span>
      ec52aa2792efc27fd3ad0eaf7fa69f097fdcefab017ea56d1799b10b21<span class="se">\</span>
      02207a6ae3eb61e11ffaba0453f173d1792f1b7bb8e7422ea945101d68<span class="se">\</span>
      535c4b474801fffffffff0ede03d75050f20801d50358829ae02c058e8<span class="se">\</span>
      677d2cc74df51f738285013c26000000006b483045022100b77f935ff3<span class="se">\</span>
      66a6f3c2fdeb83589c790265d43b3d2cf5e5f0047da56c36de75f40220<span class="se">\</span>
      707ceda75d8dcf2ccaebc506f7293c3dcb910554560763d7659fb202f8<span class="se">\</span>
      ec324b012102240d7d3c7aad57b68aa0178f4c56f997d1bfab2ded3c2f<span class="se">\</span>
      9427686017c603a6d6ffffffff02f028d6dc010000001976a914ffb035<span class="se">\</span>
      781c3c69e076d48b60c3d38592e7ce06a788ac00ca9a3b000000001976<span class="se">\</span>
      a914fa5139067622fd7e1e722a05c17c2bb7d5fd6df088ac00000000
</pre></div>
</div>
<p>Put the previously signed (but not sent) transaction into a shell variable.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest decoderawtransaction <span class="nv">$OLD_SIGNED_RAW_TX</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;682cad881df69cb9df8f0c996ce96ecad758357ded2da03bad\</span>
<span class="s2">              40cf18ffbb8e09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;hash&quot;</span> <span class="p">:</span> <span class="s2">&quot;682cad881df69cb9df8f0c996ce96ecad758357ded2da03bad40cf18ffbb8e09&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span> <span class="p">:</span> <span class="mi">340</span><span class="p">,</span>
    <span class="nt">&quot;vsize&quot;</span> <span class="p">:</span> <span class="mi">340</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;locktime&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;vin&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;78203a8f6b529693759e1917a1b9f05670d036fbb1\</span>
<span class="s2">                      29110ed26be6a36de827f3&quot;</span><span class="p">,</span>
            <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptSig&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;3045022100fce442ec52aa2792efc27fd3ad0ea\</span>
<span class="s2">                         f7fa69f097fdcefab017ea56d1799b10b210220\</span>
<span class="s2">                         7a6ae3eb61e11ffaba0453f173d1792f1b7bb8e\</span>
<span class="s2">                         7422ea945101d68535c4b474801&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;483045022100FCE442ec52aa2792efc27fd3ad0\</span>
<span class="s2">                         eaf7fa69f097fdcefab017ea56d1799b10b2102\</span>
<span class="s2">                         207a6ae3eb61e11ffaba0453f173d1792f1b7bb\</span>
<span class="s2">                         8e7422ea945101d68535c4b474801&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;sequence&quot;</span> <span class="p">:</span> <span class="mi">4294967295</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835\</span>
<span class="s2">                      501d80200f05753de0edf0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptSig&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;3045022100b77f935ff366a6f3c2fdeb83589c7\</span>
<span class="s2">                         90265d43b3d2cf5e5f0047da56c36de75f40220\</span>
<span class="s2">                         707ceda75d8dcf2ccaebc506f7293c3dcb91055\</span>
<span class="s2">                         4560763d7659fb202f8ec324b01</span>
<span class="s2">                         02240d7d3c7aad57b68aa0178f4c56f997d1bfa\</span>
<span class="s2">                         b2ded3c2f9427686017c603a6d6&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;483045022100b77f935ff366a6f3c2fdeb83589\</span>
<span class="s2">                         c790265d43b3d2cf5e5f0047da56c36de75f402\</span>
<span class="s2">                         20707ceda75d8dcf2ccaebc506f7293c3dcb910\</span>
<span class="s2">                         554560763d7659fb202f8ec324b012102240d7d\</span>
<span class="s2">                         3c7aad57b68aa0178f4c56f997d1bfab2ded3c2\</span>
<span class="s2">                         f9427686017c603a6d6&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;sequence&quot;</span> <span class="p">:</span> <span class="mi">4294967295</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="mf">79.99990000</span><span class="p">,</span>
            <span class="nt">&quot;n&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;OP_DUP OP_HASH160 ffb035781c3c69e076d48\</span>
<span class="s2">                         b60c3d38592e7ce06a7 OP_EQUALVERIFY OP_CHECKSIG&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914ffb035781c3c69e076d48b60c3d38592e\</span>
<span class="s2">                         7ce06a788ac&quot;</span><span class="p">,</span>
                <span class="nt">&quot;reqSigs&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pubkeyhash&quot;</span><span class="p">,</span>
                <span class="nt">&quot;addresses&quot;</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;n4puhBEeEWD2VvjdRC9kQuX2abKxSCMNqN&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="mf">10.00000000</span><span class="p">,</span>
            <span class="nt">&quot;n&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;OP_DUP OP_HASH160 fa5139067622fd7e1e722\</span>
<span class="s2">                         a05c17c2bb7d5fd6df0 OP_EQUALVERIFY OP_CHECKSIG&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a914fa5139067622fd7e1e722a05c17c2bb7d\</span>
<span class="s2">                         5fd6df088ac&quot;</span><span class="p">,</span>
                <span class="nt">&quot;reqSigs&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pubkeyhash&quot;</span><span class="p">,</span>
                <span class="nt">&quot;addresses&quot;</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;n4LWXU59yM5MzQev7Jx7VNeq1BqZ85ZbLj&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">UTXO_TXID</span><span class="o">=</span>682cad881df69cb9df8f0c996ce96ecad758357ded2da03bad40<span class="o">[</span>...<span class="o">]</span>
&gt; <span class="nv">UTXO_VOUT</span><span class="o">=</span><span class="m">1</span>
&gt; <span class="nv">UTXO_VALUE</span><span class="o">=</span><span class="m">10</span>.00000000
&gt; <span class="nv">UTXO_OUTPUT_SCRIPT</span><span class="o">=</span>76a914fa5139067622fd7e1e722a05c17c2bb7d5fd6<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Decode the signed raw transaction so we can get its txid. Also, choose a specific one of its UTXOs to spend and save that UTXO’s <a class="reference external" href="/en/developer-guide#term-output-index">output index</a> number (vout) and hex pubkey script (scriptPubKey) into shell variables.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
mfdCHEFL2tW9eEUpizk7XLZJcnFM4hrp78

&gt; <span class="nv">NEW_ADDRESS</span><span class="o">=</span>mfdCHEFL2tW9eEUpizk7XLZJcnFM4hrp78
</pre></div>
</div>
<p>Get a new address to spend the satoshis to.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">## Outputs - inputs = transaction fee, so always double-check your math!</span>
&gt; bitcoin-cli -regtest createrawtransaction <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    {</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS</span><span class="s1">&#39;&quot;: 9.9999</span>
<span class="s1">    }&#39;&#39;&#39;</span>
0100000001098ebbff18cf40ad3ba02ded7d3558d7ca6ee96c990c8fdfb99cf6<span class="se">\</span>
1d88ad2c680100000000ffffffff01f0a29a3b000000001976a914012e2ba6a0<span class="se">\</span>
51c033b03d712ca2ea00a35eac1e7988ac00000000

&gt; <span class="nv">RAW_TX</span><span class="o">=</span>0100000001098ebbff18cf40ad3ba02ded7d3558d7ca6ee96c990c8<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Create the raw transaction the same way we’ve done in the previous subsections.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$RAW_TX</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;0100000001098ebbff18cf40ad3ba02ded7d3558d7ca6ee\</span>
<span class="s2">             96c990c8fdfb99cf61d88ad2c680100000000ffffffff01\</span>
<span class="s2">             f0a29a3b000000001976a914012e2ba6a051c033b03d712\</span>
<span class="s2">             ca2ea00a35eac1e7988ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Attempt to sign the raw transaction without any special arguments, the way we successfully signed the the raw transaction in the Simple Raw Transaction subsection. If you’ve read the <a class="reference external" href="/en/developer-guide#transactions">Transaction section</a> of the guide, you may know why the call fails and leaves the raw transaction hex unchanged.</p>
<div class="figure align-center" id="id1">
<img alt="Old Transaction Data Required To Be Signed" src="../_images/en-signing-output-to-spend.svg" /><p class="caption"><span class="caption-text">Old Transaction Data Required To Be Signed</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>As illustrated above, the data that gets signed includes the txid and vout from the previous transaction. That information is included in the <a class="reference external" href="/en/developer-reference#createrawtransaction">“createrawtransaction”</a> raw transaction. But the data that gets signed also includes the pubkey script from the previous transaction, even though it doesn’t appear in either the unsigned or signed transaction.</p>
<p>In the other raw transaction subsections above, the previous output was part of the UTXO set known to the wallet, so the wallet was able to use the txid and <a class="reference external" href="/en/developer-guide#term-output-index">output index</a> number to find the previous pubkey script and insert it automatically.</p>
<p>In this case, you’re spending an output which is unknown to the wallet, so it can’t automatically insert the previous pubkey script.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$RAW_TX</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;,</span>
<span class="s1">        &quot;scriptPubKey&quot;: &quot;&#39;</span><span class="nv">$UTXO_OUTPUT_SCRIPT</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;value&quot;: &#39;</span><span class="nv">$UTXO_VALUE</span><span class="s1">&#39;</span>
<span class="s1">      }</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;0100000001098ebbff18cf40ad3ba02ded7d3558d7ca6ee96c9\</span>
<span class="s2">             90c8fdfb99cf61d88ad2c68010000006b483045022100c3f92f\</span>
<span class="s2">             b74bfa687d76ebe75a654510bb291b8aab6f89ded4fe26777c2\</span>
<span class="s2">             eb233ad02207f779ce2a181cc4055cb0362aba7fd7a6f72d5db\</span>
<span class="s2">             b9bd863f4faaf47d8d6c4b500121028e4e62d25760709806131\</span>
<span class="s2">             b014e2572f7590e70be01f0ef16bfbd51ea5f389d4dffffffff\</span>
<span class="s2">             01f0a29a3b000000001976a914012e2ba6a051c033b03d712ca\</span>
<span class="s2">             2ea00a35eac1e7988ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">SIGNED_RAW_TX</span><span class="o">=</span>0100000001098ebbff18cf40ad3ba02ded7d3558d7ca6ee9<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Successfully sign the transaction by providing the previous pubkey script and other required input data.</p>
<p>This specific operation is typically what offline signing wallets do. The online wallet creates the raw transaction and gets the previous pubkey scripts for all the inputs. The user brings this information to the offline wallet. After displaying the transaction details to the user, the offline wallet signs the transaction as we did above. The user takes the signed transaction back to the online wallet, which broadcasts it.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendrawtransaction <span class="nv">$SIGNED_RAW_TX</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>error: {&quot;code&quot;:-22,&quot;message&quot;:&quot;TX rejected&quot;}
</pre></div>
</div>
</div>
<p>Attempt to broadcast the second transaction before we’ve broadcast the first transaction. The node rejects this attempt because the second transaction spends an output which is not a UTXO the node knows about.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendrawtransaction <span class="nv">$OLD_SIGNED_RAW_TX</span>
682cad881df69cb9df8f0c996ce96ecad758357ded2da03bad40cf18ffbb8e09
&gt; bitcoin-cli -regtest sendrawtransaction <span class="nv">$SIGNED_RAW_TX</span>
67d53afa1a8167ca093d30be7fb9dcb8a64a5fdecacec9d93396330c47052c57
</pre></div>
</div>
<p>Broadcast the first transaction, which succeeds, and then broadcast the second transaction—which also now succeeds because the node now sees the UTXO.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getrawmempool
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;67d53afa1a8167ca093d30be7fb9dcb8a64a5fdecacec9d93396330c47052c57&quot;</span><span class="p">,</span>
    <span class="s2">&quot;682cad881df69cb9df8f0c996ce96ecad758357ded2da03bad40cf18ffbb8e09&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>We have once again not generated an additional block, so the transactions above have not yet become part of the regtest block chain. However, they are part of the local node’s memory pool.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nb">unset</span> OLD_SIGNED_RAW_TX SIGNED_RAW_TX RAW_TX <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Remove old shell variables.</p>
</div>
<div class="section" id="p2sh-multisig">
<h3>P2SH Multisig<a class="headerlink" href="#p2sh-multisig" title="Permalink to this headline">¶</a></h3>
<p>In this subsection, we will create a P2SH multisig address, spend satoshis to it, and then spend those satoshis from it to another address.</p>
<p>Creating a multisig address is easy. Multisig outputs have two parameters, the <em>minimum</em> number of signatures required (<em>m</em>) and the <em>number</em> of public keys to use to validate those signatures. This is called m-of-n, and in this case we’ll be using 2-of-3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
mhAXF4Eq7iRyvbYk1mpDVBiGdLP3YbY6Dm
&gt; bitcoin-cli -regtest getnewaddress
moaCrnRfP5zzyhW8k65f6Rf2z5QpvJzSKe
&gt; bitcoin-cli -regtest getnewaddress
mk2QpYatsKicvFVuTAQLBryyccRXMUaGHP

&gt; <span class="nv">NEW_ADDRESS1</span><span class="o">=</span>mhAXF4Eq7iRyvbYk1mpDVBiGdLP3YbY6Dm
&gt; <span class="nv">NEW_ADDRESS2</span><span class="o">=</span>moaCrnRfP5zzyhW8k65f6Rf2z5QpvJzSKe
&gt; <span class="nv">NEW_ADDRESS3</span><span class="o">=</span>mk2QpYatsKicvFVuTAQLBryyccRXMUaGHP
</pre></div>
</div>
<p>Generate three new P2PKH addresses. P2PKH addresses cannot be used with the multisig redeem script created below. (Hashing each public key is unnecessary anyway—all the public keys are protected by a hash when the redeem script is hashed.) However, Bitcoin Core uses addresses as a way to reference the underlying full (unhashed) public keys it knows about, so we get the three new addresses above in order to use their public keys.</p>
<p>Recall from the Guide that the hashed public keys used in addresses obfuscate the full public key, so you cannot give an address to another person or device as part of creating a typical multisig output or P2SH multisig redeem script. You must give them a full public key.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest validateaddress <span class="nv">$NEW_ADDRESS3</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;isvalid&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;mk2QpYatsKicvFVuTAQLBryyccRXMUaGHP&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="s2">&quot;76a9143172b5654f6683c8fb146959d347ce303cae4ca788ac&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ismine&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;iswatchonly&quot;</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;isscript&quot;</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;pubkey&quot;</span> <span class="p">:</span> <span class="s2">&quot;029e03a901b85534ff1e92c43c74431f7ce72046060fcf7a\</span>
<span class="s2">                95c37e148f78c77255&quot;</span><span class="p">,</span>
    <span class="nt">&quot;iscompressed&quot;</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;account&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">NEW_ADDRESS3_PUBLIC_KEY</span><span class="o">=</span>029e03a901b85534ff1e92c43c74431f7ce720<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#validateaddress">“validateaddress” RPC</a> to display the full (unhashed) public key for one of the addresses. This is the information which will actually be included in the multisig redeem script. This is also the information you would give another person or device as part of creating a multisig output or P2SH multisig redeem script.</p>
<p>We save the address returned to a shell variable.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest createmultisig <span class="m">2</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS1</span><span class="s1">&#39;&quot;,</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS2</span><span class="s1">&#39;&quot;,</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS3_PUBLIC_KEY</span><span class="s1">&#39;&quot;</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;2N7NaqSKYQUeM8VNgBy8D9xQQbiA8yiJayk&quot;</span><span class="p">,</span>
    <span class="nt">&quot;redeemScript&quot;</span> <span class="p">:</span> <span class="s2">&quot;522103310188e911026cf18c3ce274e0ebb5f95b00\</span>
<span class="s2">    7f230d8cb7d09879d96dbeab1aff210243930746e6ed6552e03359db521b\</span>
<span class="s2">    088134652905bd2d1541fa9124303a41e95621029e03a901b85534ff1e92\</span>
<span class="s2">    c43c74431f7ce72046060fcf7a95c37e148f78c7725553ae&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">P2SH_ADDRESS</span><span class="o">=</span>2N7NaqSKYQUeM8VNgBy8D9xQQbiA8yiJayk
&gt; <span class="nv">P2SH_REDEEM_SCRIPT</span><span class="o">=</span>522103310188e911026cf18c3ce274e0ebb5f95b007<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Use the <a class="reference external" href="/en/developer-reference#createmultisig">“createmultisig” RPC</a> with two arguments, the number (<em>n</em>) of signatures required and a list of addresses or public keys. Because P2PKH addresses can’t be used in the multisig redeem script created by this <a class="reference external" href="/en/developer-reference#remote-procedure-calls-rpcs">RPC</a>, the only addresses which can be provided are those belonging to a public key in the wallet. In this case, we provide two addresses and one public key—all of which will be converted to public keys in the redeem script.</p>
<p>The P2SH address is returned along with the redeem script which must be provided when we spend satoshis sent to the P2SH address.</p>
<p><img alt="Warning icon" src="../_images/icon_warning.svg" /> <strong>Warning:</strong> You must not lose the redeem script, especially if you don’t have a record of which public keys you used to create the P2SH multisig address. You need the redeem script to spend any bitcoins sent to the P2SH address. If you lose the redeem script, you can recreate it by running the same command above, with the public keys listed in the same order. However, if you lose both the redeem script and even one of the public keys, you will never be able to spend satoshis sent to that P2SH address.</p>
<p>Neither the address nor the redeem script are stored in the wallet when you use <a class="reference external" href="/en/developer-reference#createmultisig">“createmultisig”</a>. To store them in the wallet, use the <a class="reference external" href="/en/developer-reference#addmultisigaddress">“addmultisigaddress” RPC</a> instead. If you add an address to the wallet, you should also make a new backup.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendtoaddress <span class="nv">$P2SH_ADDRESS</span> <span class="m">10</span>.00
7278d7d030f042ebe633732b512bcb31fff14a697675a1fe1884db139876e175

&gt; <span class="nv">UTXO_TXID</span><span class="o">=</span>7278d7d030f042ebe633732b512bcb31fff14a697675a1fe1884<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Paying the P2SH multisig address with Bitcoin Core is as simple as paying a more common P2PKH address. Here we use the same command (but different variable) we used in the Simple Spending subsection. As before, this command automatically selects an UTXO, creates a change output to a new one of our P2PKH addresses if necessary, and pays a transaction fee if necessary.</p>
<p>We save that txid to a shell variable as the txid of the UTXO we plan to spend next.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getrawtransaction <span class="nv">$UTXO_TXID</span> <span class="m">1</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;0100000001f0ede03d75050f20801d50358829ae02c058e8677\</span>
<span class="s2">             d2cc74df51f738285013c26010000006a47304402203c375959\</span>
<span class="s2">             2bf608ab79c01596c4a417f3110dd6eb776270337e575cdafc6\</span>
<span class="s2">             99af20220317ef140d596cc255a4067df8125db7f349ad94521\</span>
<span class="s2">             2e9264a87fa8d777151937012102a92913b70f9fb15a7ea5c42\</span>
<span class="s2">             df44637f0de26e2dad97d6d54957690b94cf2cd05ffffffff01\</span>
<span class="s2">             00ca9a3b0000000017a9149af61346ce0aa2dffcf697352b4b7\</span>
<span class="s2">             04c84dcbaff8700000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;7278d7d030f042ebe633732b512bcb31fff14a697675a1fe18\</span>
<span class="s2">              84db139876e175&quot;</span><span class="p">,</span>
    <span class="nt">&quot;hash&quot;</span> <span class="p">:</span> <span class="s2">&quot;7278d7d030f042ebe633732b512bcb31fff14a697675a1fe1884db139876e175&quot;</span><span class="p">,</span>
    <span class="nt">&quot;size&quot;</span> <span class="p">:</span> <span class="mi">189</span><span class="p">,</span>
    <span class="nt">&quot;vsize&quot;</span> <span class="p">:</span> <span class="mi">189</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;locktime&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;vin&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;txid&quot;</span> <span class="p">:</span> <span class="s2">&quot;263c018582731ff54dc72c7d67e858c002ae298835\</span>
<span class="s2">                      501d80200f05753de0edf0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;scriptSig&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;304402203c3759592bf608ab79c01596c4a417f\</span>
<span class="s2">                         3110dd6eb776270337e575cdafc699af2022031\</span>
<span class="s2">                         7ef140d596cc255a4067df8125db7f349ad9452\</span>
<span class="s2">                         12e9264a87fa8d77715193701</span>
<span class="s2">                         02a92913b70f9fb15a7ea5c42df44637f0de26e\</span>
<span class="s2">                         2dad97d6d54957690b94cf2cd05&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;47304402203c3759592bf608ab79c01596c4a41\</span>
<span class="s2">                         7f3110dd6eb776270337e575cdafc699af20220\</span>
<span class="s2">                         317ef140d596cc255a4067df8125db7f349ad94\</span>
<span class="s2">                         5212e9264a87fa8d777151937012102a92913b7\</span>
<span class="s2">                         0f9fb15a7ea5c42df44637f0de26e2dad97d6d5\</span>
<span class="s2">                         4957690b94cf2cd05&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;sequence&quot;</span> <span class="p">:</span> <span class="mi">4294967295</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;vout&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="mf">10.00000000</span><span class="p">,</span>
            <span class="nt">&quot;n&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;scriptPubKey&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;asm&quot;</span> <span class="p">:</span> <span class="s2">&quot;OP_HASH160 9af61346ce0aa2dffcf697352b4b\</span>
<span class="s2">                704c84dcbaff OP_EQUAL&quot;</span><span class="p">,</span>
                <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;a9149af61346ce0aa2dffcf697352b4b704c84d\</span>
<span class="s2">                         cbaff87&quot;</span><span class="p">,</span>
                <span class="nt">&quot;reqSigs&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;scripthash&quot;</span><span class="p">,</span>
                <span class="nt">&quot;addresses&quot;</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;2N7NaqSKYQUeM8VNgBy8D9xQQbiA8yiJayk&quot;</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">UTXO_VOUT</span><span class="o">=</span><span class="m">0</span>
&gt; <span class="nv">UTXO_OUTPUT_SCRIPT</span><span class="o">=</span>a9149af61346ce0aa2dffcf697352b4b704c84dcbaff87
</pre></div>
</div>
</div>
<p>We use the <a class="reference external" href="/en/developer-reference#getrawtransaction">“getrawtransaction” RPC</a> with the optional second argument (<em>true</em>) to get the decoded transaction we just created with <a class="reference external" href="/en/developer-reference#sendtoaddress">“sendtoaddress”</a>. We choose one of the outputs to be our UTXO and get its <a class="reference external" href="/en/developer-guide#term-output-index">output index</a> number (vout) and pubkey script (scriptPubKey).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest getnewaddress
mxCNLtKxzgjg8yyNHeuFSXvxCvagkWdfGU

&gt; <span class="nv">NEW_ADDRESS4</span><span class="o">=</span>mxCNLtKxzgjg8yyNHeuFSXvxCvagkWdfGU
</pre></div>
</div>
<p>We generate a new P2PKH address to use in the output we’re about to create.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">## Outputs - inputs = transaction fee, so always double-check your math!</span>
&gt; bitcoin-cli -regtest createrawtransaction <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;</span>
<span class="s1">      }</span>
<span class="s1">   ]</span>
<span class="s1">   &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">   {</span>
<span class="s1">     &quot;&#39;</span><span class="nv">$NEW_ADDRESS4</span><span class="s1">&#39;&quot;: 9.998</span>
<span class="s1">   }&#39;&#39;&#39;</span>

010000000175e1769813db8418fea17576694af1ff31cb2b512b7333e6eb42f0<span class="se">\</span>
30d0d778720000000000ffffffff01c0bc973b000000001976a914b6f64f5bf3<span class="se">\</span>
e38f25ead28817df7929c06fe847ee88ac00000000

&gt; <span class="nv">RAW_TX</span><span class="o">=</span>010000000175e1769813db8418fea17576694af1ff31cb2b512b733<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>We generate the raw transaction the same way we did in the Simple Raw Transaction subsection.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest dumpprivkey <span class="nv">$NEW_ADDRESS1</span>
cVinshabsALz5Wg4tGDiBuqEGq4i6WCKWXRQdM8RFxLbALvNSHw7
&gt; bitcoin-cli -regtest dumpprivkey <span class="nv">$NEW_ADDRESS3</span>
cNmbnwwGzEghMMe1vBwH34DFHShEj5bcXD1QpFRPHgG9Mj1xc5hq

&gt; <span class="nv">NEW_ADDRESS1_PRIVATE_KEY</span><span class="o">=</span>cVinshabsALz5Wg4tGDiBuqEGq4i6WCKWXRQd<span class="o">[</span>...<span class="o">]</span>
&gt; <span class="nv">NEW_ADDRESS3_PRIVATE_KEY</span><span class="o">=</span>cNmbnwwGzEghMMe1vBwH34DFHShEj5bcXD1Qp<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>We get the private keys for two of the public keys we used to create the transaction, the same way we got private keys in the Complex Raw Transaction subsection. Recall that we created a 2-of-3 multisig pubkey script, so signatures from two private keys are needed.</p>
<p><img alt="Warning icon" src="../_images/icon_warning.svg" /> <strong>Reminder:</strong> Users should never manually manage private keys on mainnet. See the warning in the <a class="reference external" href="/en/developer-examples#complex-raw-transaction">complex raw transaction section</a>.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$RAW_TX</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;,</span>
<span class="s1">        &quot;scriptPubKey&quot;: &quot;&#39;</span><span class="nv">$UTXO_OUTPUT_SCRIPT</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;redeemScript&quot;: &quot;&#39;</span><span class="nv">$P2SH_REDEEM_SCRIPT</span><span class="s1">&#39;&quot;</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS1_PRIVATE_KEY</span><span class="s1">&#39;&quot;</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;010000000175e1769813db8418fea17576694af1ff31cb2b512\</span>
<span class="s2">             b7333e6eb42f030d0d7787200000000b5004830450221008d5e\</span>
<span class="s2">             c57d362ff6ef6602e4e756ef1bdeee12bd5c5c72697ef1455b3\</span>
<span class="s2">             79c90531002202ef3ea04dfbeda043395e5bc701e4878c15baa\</span>
<span class="s2">             b9c6ba5808eb3d04c91f641a0c014c69522103310188e911026\</span>
<span class="s2">             cf18c3ce274e0ebb5f95b007f230d8cb7d09879d96dbeab1aff\</span>
<span class="s2">             210243930746e6ed6552e03359db521b088134652905bd2d154\</span>
<span class="s2">             1fa9124303a41e95621029e03a901b85534ff1e92c43c74431f\</span>
<span class="s2">             7ce72046060fcf7a95c37e148f78c7725553aeffffffff01c0b\</span>
<span class="s2">             c973b000000001976a914b6f64f5bf3e38f25ead28817df7929\</span>
<span class="s2">             c06fe847ee88ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">PARTLY_SIGNED_RAW_TX</span><span class="o">=</span>010000000175e1769813db8418fea17576694af1f<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>We make the first signature. The input argument (JSON object) takes the additional redeem script parameter so that it can append the redeem script to the signature script after the two signatures.</p>
<div class="multicode docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest signrawtransaction <span class="nv">$PARTLY_SIGNED_RAW_TX</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      {</span>
<span class="s1">        &quot;txid&quot;: &quot;&#39;</span><span class="nv">$UTXO_TXID</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;vout&quot;: &#39;</span><span class="nv">$UTXO_VOUT</span><span class="s1">&#39;,</span>
<span class="s1">        &quot;scriptPubKey&quot;: &quot;&#39;</span><span class="nv">$UTXO_OUTPUT_SCRIPT</span><span class="s1">&#39;&quot;,</span>
<span class="s1">        &quot;redeemScript&quot;: &quot;&#39;</span><span class="nv">$P2SH_REDEEM_SCRIPT</span><span class="s1">&#39;&quot;</span>
<span class="s1">      }</span>
<span class="s1">    ]</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    [</span>
<span class="s1">      &quot;&#39;</span><span class="nv">$NEW_ADDRESS3_PRIVATE_KEY</span><span class="s1">&#39;&quot;</span>
<span class="s1">    ]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;hex&quot;</span> <span class="p">:</span> <span class="s2">&quot;010000000175e1769813db8418fea17576694af1ff31cb2b512\</span>
<span class="s2">             b7333e6eb42f030d0d7787200000000fdfd0000483045022100\</span>
<span class="s2">             8d5ec57d362ff6ef6602e4e756ef1bdeee12bd5c5c72697ef14\</span>
<span class="s2">             55b379c90531002202ef3ea04dfbeda043395e5bc701e4878c1\</span>
<span class="s2">             5baab9c6ba5808eb3d04c91f641a0c0147304402200bd8c62b9\</span>
<span class="s2">             38e02094021e481b149fd5e366a212cb823187149799a68cfa7\</span>
<span class="s2">             652002203b52120c5cf25ceab5f0a6b5cdb8eca0fd2f386316c\</span>
<span class="s2">             9721177b75ddca82a4ae8014c69522103310188e911026cf18c\</span>
<span class="s2">             3ce274e0ebb5f95b007f230d8cb7d09879d96dbeab1aff21024\</span>
<span class="s2">             3930746e6ed6552e03359db521b088134652905bd2d1541fa91\</span>
<span class="s2">             24303a41e95621029e03a901b85534ff1e92c43c74431f7ce72\</span>
<span class="s2">             046060fcf7a95c37e148f78c7725553aeffffffff01c0bc973b\</span>
<span class="s2">             000000001976a914b6f64f5bf3e38f25ead28817df7929c06fe\</span>
<span class="s2">             847ee88ac00000000&quot;</span><span class="p">,</span>
    <span class="nt">&quot;complete&quot;</span> <span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nv">SIGNED_RAW_TX</span><span class="o">=</span>010000000175e1769813db8418fea17576694af1ff31cb2b<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<p>The <a class="reference external" href="/en/developer-reference#signrawtransaction">“signrawtransaction”</a> call used here is nearly identical to the one used above. The only difference is the private key used. Now that the two required signatures have been provided, the transaction is marked as complete.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bitcoin-cli -regtest sendrawtransaction <span class="nv">$SIGNED_RAW_TX</span>
430a4cee3a55efb04cbb8718713cab18dea7f2521039aa660ffb5aae14ff3f50
</pre></div>
</div>
<p>We send the transaction spending the P2SH multisig output to the local node, which accepts it.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="payment_processing.html" class="btn btn-neutral float-right" title="Payment Processing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="testing.html" class="btn btn-neutral float-left" title="Testing Applications" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Bitcoin.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>